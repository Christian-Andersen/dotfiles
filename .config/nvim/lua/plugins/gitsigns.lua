-- ============================================================================\n-- GITSIGNS - GIT INTEGRATION\n-- ============================================================================\n-- gitsigns.nvim: Shows git changes in the gutter and provides git operations\n-- \n-- Features:\n--   - Visual indicators for added, modified, and deleted lines\n--   - Jump to next/previous change with ]c and [c\n--   - Stage/reset hunks (partial commits)\n--   - Blame information (who wrote this line and when)\n--   - Diff viewing within Neovim\n--   - Word-level diff highlighting\n--\n-- Keybindings:\n--   ]c          : Jump to next git change\n--   [c          : Jump to previous git change\n--   <leader>hs  : Stage hunk (works in normal and visual mode)\n--   <leader>hr  : Reset hunk (works in normal and visual mode)\n--   <leader>hS  : Stage entire buffer\n--   <leader>hu  : Undo stage hunk\n--   <leader>hR  : Reset entire buffer\n--   <leader>hp  : Preview hunk\n--   <leader>hb  : Show git blame for current line\n--   <leader>hd  : Show diff against index\n--   <leader>hD  : Show diff against last commit\n--   <leader>tb  : Toggle blame info on current line\n--   <leader>tD  : Toggle inline diff display\n--\n-- Repo: https://github.com/lewis6991/gitsigns.nvim\n-- ============================================================================\n\nreturn {\n    'lewis6991/gitsigns.nvim',\n    \n    -- Configure gitsigns behavior and keybindings\n    opts = {\n        -- Define the signs (symbols) displayed in the gutter\n        -- These show what type of change was made at each line\n        signs = {\n            add = { text = '+' },          -- Added lines\n            change = { text = '~' },       -- Modified lines\n            delete = { text = '_' },       -- Deleted lines (but can be seen in diff)\n            topdelete = { text = 'â€¾' },    -- Deleted lines at the top of a file\n            changedelete = { text = '~' }, -- Lines that are changed and deleted\n        },\n        \n        -- on_attach: Called when gitsigns attaches to a buffer\n        -- Sets up buffer-local keybindings for git operations\n        on_attach = function(bufnr)\n            -- Load the gitsigns module for this buffer\n            local gitsigns = require 'gitsigns'\n\n            -- Helper function to set keybindings scoped to this buffer\n            local function map(mode, l, r, opts)\n                opts = opts or {}\n                opts.buffer = bufnr  -- Bind to this buffer only\n                vim.keymap.set(mode, l, r, opts)\n            end\n\n            -- ===== NAVIGATION: Jump between git changes =====\n            -- Jump to next git change (next hunk)\n            map('n', ']c', function()\n                -- In diff mode, use vim's built-in diff navigation\n                if vim.wo.diff then\n                    vim.cmd.normal { ']c', bang = true }\n                else\n                    -- Otherwise, use gitsigns hunk navigation\n                    gitsigns.nav_hunk 'next'\n                end\n            end, { desc = 'Jump to next git [c]hange' })\n\n            -- Jump to previous git change (previous hunk)\n            map('n', '[c', function()\n                if vim.wo.diff then\n                    vim.cmd.normal { '[c', bang = true }\n                else\n                    gitsigns.nav_hunk 'prev'\n                end\n            end, { desc = 'Jump to previous git [c]hange' })\n\n            -- ===== ACTIONS: Modify staging and view diffs =====\n            -- Visual mode actions (for selecting ranges of hunks)\n            map('v', '<leader>hs', function()\n                -- Stage the selected lines (visual selection)\n                gitsigns.stage_hunk { vim.fn.line '.', vim.fn.line 'v' }\n            end, { desc = 'git [s]tage hunk' })\n            map('v', '<leader>hr', function()\n                -- Reset (discard) the selected lines\n                gitsigns.reset_hunk { vim.fn.line '.', vim.fn.line 'v' }\n            end, { desc = 'git [r]eset hunk' })\n            \n            -- Normal mode actions\n            map('n', '<leader>hs', gitsigns.stage_hunk, { desc = 'git [s]tage hunk' })\n            map('n', '<leader>hr', gitsigns.reset_hunk, { desc = 'git [r]eset hunk' })\n            -- Stage the entire buffer\n            map('n', '<leader>hS', gitsigns.stage_buffer, { desc = 'git [S]tage buffer' })\n            -- Undo the last stage operation\n            map('n', '<leader>hu', gitsigns.stage_hunk, { desc = 'git [u]ndo stage hunk' })\n            -- Reset (discard all changes in) the entire buffer\n            map('n', '<leader>hR', gitsigns.reset_buffer, { desc = 'git [R]eset buffer' })\n            -- Preview what a hunk looks like (shows additions/deletions)\n            map('n', '<leader>hp', gitsigns.preview_hunk, { desc = 'git [p]review hunk' })\n            -- Show git blame information for the current line\n            -- Displays author, date, and commit hash\n            map('n', '<leader>hb', gitsigns.blame_line, { desc = 'git [b]lame line' })\n            -- Show a diff of the current hunk against the index (staged changes)\n            map('n', '<leader>hd', gitsigns.diffthis, { desc = 'git [d]iff against index' })\n            -- Show a diff against the last commit (@) to see all uncommitted changes\n            map('n', '<leader>hD', function()\n                gitsigns.diffthis '@'\n            end, { desc = 'git [D]iff against last commit' })\n            \n            -- ===== TOGGLES: Show/hide git information =====\n            -- Toggle the display of blame information for the current line\n            -- Useful for checking who wrote code and when\n            map('n', '<leader>tb', gitsigns.toggle_current_line_blame, { desc = '[T]oggle git show [b]lame line' })\n            -- Toggle inline display of deleted lines\n            -- Shows what was deleted (useful for reviewing changes)\n            map('n', '<leader>tD', gitsigns.preview_hunk_inline, { desc = '[T]oggle git show [D]eleted' })\n        end,\n    },\n}
